{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport * as React from 'react';\nimport { Customizations } from './Customizations';\nimport { hoistStatics } from '../hoistStatics';\nimport { CustomizerContext } from './CustomizerContext';\nimport { concatStyleSets } from '@fluentui/merge-styles';\nexport function customizable(scope, fields, concatStyles) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return function customizableFactory(ComposedComponent) {\n    var _a;\n    var resultClass = (_a = /** @class */function (_super) {\n      __extends(ComponentWithInjectedProps, _super);\n      function ComponentWithInjectedProps(props) {\n        var _this = _super.call(this, props) || this;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        _this._styleCache = {};\n        _this._onSettingChanged = _this._onSettingChanged.bind(_this);\n        return _this;\n      }\n      ComponentWithInjectedProps.prototype.componentDidMount = function () {\n        Customizations.observe(this._onSettingChanged);\n      };\n      ComponentWithInjectedProps.prototype.componentWillUnmount = function () {\n        Customizations.unobserve(this._onSettingChanged);\n      };\n      ComponentWithInjectedProps.prototype.render = function () {\n        var _this = this;\n        return React.createElement(CustomizerContext.Consumer, null, function (context) {\n          var defaultProps = Customizations.getSettings(fields, scope, context.customizations);\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          var componentProps = _this.props;\n          // If defaultProps.styles is a function, evaluate it before calling concatStyleSets\n          if (defaultProps.styles && typeof defaultProps.styles === 'function') {\n            defaultProps.styles = defaultProps.styles(__assign(__assign({}, defaultProps), componentProps));\n          }\n          // If concatStyles is true and custom styles have been defined compute those styles\n          if (concatStyles && defaultProps.styles) {\n            if (_this._styleCache.default !== defaultProps.styles || _this._styleCache.component !== componentProps.styles) {\n              var mergedStyles = concatStyleSets(defaultProps.styles, componentProps.styles);\n              _this._styleCache.default = defaultProps.styles;\n              _this._styleCache.component = componentProps.styles;\n              _this._styleCache.merged = mergedStyles;\n            }\n            return React.createElement(ComposedComponent, __assign({}, defaultProps, componentProps, {\n              styles: _this._styleCache.merged\n            }));\n          }\n          return React.createElement(ComposedComponent, __assign({}, defaultProps, componentProps));\n        });\n      };\n      ComponentWithInjectedProps.prototype._onSettingChanged = function () {\n        this.forceUpdate();\n      };\n      return ComponentWithInjectedProps;\n    }(React.Component), _a.displayName = 'Customized' + scope, _a);\n    return hoistStatics(ComposedComponent, resultClass);\n  };\n}","map":{"version":3,"names":["React","Customizations","hoistStatics","CustomizerContext","concatStyleSets","customizable","scope","fields","concatStyles","customizableFactory","ComposedComponent","resultClass","_a","_super","__extends","ComponentWithInjectedProps","props","_this","call","_styleCache","_onSettingChanged","bind","prototype","componentDidMount","observe","componentWillUnmount","unobserve","render","createElement","Consumer","context","defaultProps","getSettings","customizations","componentProps","styles","__assign","default","component","mergedStyles","merged","forceUpdate","Component","displayName"],"sources":["/Users/jerrywuyongon/node_modules/@fluentui/utilities/lib/src/customizations/customizable.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Customizations } from './Customizations';\nimport { hoistStatics } from '../hoistStatics';\nimport { CustomizerContext } from './CustomizerContext';\nimport { concatStyleSets } from '@fluentui/merge-styles';\nimport type { ICustomizerContext } from './CustomizerContext';\n\nexport function customizable(\n  scope: string,\n  fields: string[],\n  concatStyles?: boolean,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n): <P>(ComposedComponent: React.ComponentType<P>) => any {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return function customizableFactory<P>(ComposedComponent: React.ComponentType<P>): any {\n    const resultClass = class ComponentWithInjectedProps extends React.Component<P, {}> {\n      public static displayName: string = 'Customized' + scope;\n\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      private _styleCache: { default?: any; component?: any; merged?: any } = {};\n\n      constructor(props: P) {\n        super(props);\n\n        this._onSettingChanged = this._onSettingChanged.bind(this);\n      }\n\n      public componentDidMount(): void {\n        Customizations.observe(this._onSettingChanged);\n      }\n\n      public componentWillUnmount(): void {\n        Customizations.unobserve(this._onSettingChanged);\n      }\n\n      public render(): JSX.Element {\n        return (\n          <CustomizerContext.Consumer>\n            {(context: ICustomizerContext) => {\n              const defaultProps = Customizations.getSettings(fields, scope, context.customizations);\n\n              // eslint-disable-next-line @typescript-eslint/no-explicit-any\n              const componentProps = this.props as any;\n\n              // If defaultProps.styles is a function, evaluate it before calling concatStyleSets\n              if (defaultProps.styles && typeof defaultProps.styles === 'function') {\n                defaultProps.styles = defaultProps.styles({ ...defaultProps, ...componentProps });\n              }\n\n              // If concatStyles is true and custom styles have been defined compute those styles\n              if (concatStyles && defaultProps.styles) {\n                if (\n                  this._styleCache.default !== defaultProps.styles ||\n                  this._styleCache.component !== componentProps.styles\n                ) {\n                  const mergedStyles = concatStyleSets(defaultProps.styles, componentProps.styles);\n                  this._styleCache.default = defaultProps.styles;\n                  this._styleCache.component = componentProps.styles;\n                  this._styleCache.merged = mergedStyles;\n                }\n\n                return <ComposedComponent {...defaultProps} {...componentProps} styles={this._styleCache.merged} />;\n              }\n\n              return <ComposedComponent {...defaultProps} {...componentProps} />;\n            }}\n          </CustomizerContext.Consumer>\n        );\n      }\n\n      private _onSettingChanged(): void {\n        this.forceUpdate();\n      }\n    };\n\n    return hoistStatics(ComposedComponent, resultClass);\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}