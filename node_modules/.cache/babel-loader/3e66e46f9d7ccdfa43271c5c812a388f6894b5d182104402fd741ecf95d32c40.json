{"ast":null,"code":"import { addDays, compareDates, getDateRangeArray, isInDateRangeArray } from '../dateMath/dateMath';\nimport { DAYS_IN_WEEK } from '../dateValues/dateValues';\nimport { getDateRangeTypeToUse } from './getDateRangeTypeToUse';\nimport { getBoundedDateRange } from './getBoundedDateRange';\nimport { isRestrictedDate } from './isRestrictedDate';\n/**\n * Generates a grid of days, given the `options`.\n * Returns one additional week at the begining from the previous range\n * and one at the end from the future range\n * @param options - parameters to specify date related restrictions for the resulting grid\n */\nexport var getDayGrid = function (options) {\n  var selectedDate = options.selectedDate,\n    dateRangeType = options.dateRangeType,\n    firstDayOfWeek = options.firstDayOfWeek,\n    today = options.today,\n    minDate = options.minDate,\n    maxDate = options.maxDate,\n    weeksToShow = options.weeksToShow,\n    workWeekDays = options.workWeekDays,\n    daysToSelectInDayView = options.daysToSelectInDayView,\n    restrictedDates = options.restrictedDates,\n    markedDays = options.markedDays;\n  var restrictedDateOptions = {\n    minDate: minDate,\n    maxDate: maxDate,\n    restrictedDates: restrictedDates\n  };\n  var todaysDate = today || new Date();\n  var navigatedDate = options.navigatedDate ? options.navigatedDate : todaysDate;\n  var date;\n  if (weeksToShow && weeksToShow <= 4) {\n    // if showing less than a full month, just use date == navigatedDate\n    date = new Date(navigatedDate.getFullYear(), navigatedDate.getMonth(), navigatedDate.getDate());\n  } else {\n    date = new Date(navigatedDate.getFullYear(), navigatedDate.getMonth(), 1);\n  }\n  var weeks = [];\n  // Cycle the date backwards to get to the first day of the week.\n  while (date.getDay() !== firstDayOfWeek) {\n    date.setDate(date.getDate() - 1);\n  }\n  // add the transition week as last week of previous range\n  date = addDays(date, -DAYS_IN_WEEK);\n  // a flag to indicate whether all days of the week are outside the month\n  var isAllDaysOfWeekOutOfMonth = false;\n  // in work week view if the days aren't contiguous we use week view instead\n  var selectedDateRangeType = getDateRangeTypeToUse(dateRangeType, workWeekDays, firstDayOfWeek);\n  var selectedDates = [];\n  if (selectedDate) {\n    selectedDates = getDateRangeArray(selectedDate, selectedDateRangeType, firstDayOfWeek, workWeekDays, daysToSelectInDayView);\n    selectedDates = getBoundedDateRange(selectedDates, minDate, maxDate);\n  }\n  var shouldGetWeeks = true;\n  for (var weekIndex = 0; shouldGetWeeks; weekIndex++) {\n    var week = [];\n    isAllDaysOfWeekOutOfMonth = true;\n    var _loop_1 = function (dayIndex) {\n      var originalDate = new Date(date.getTime());\n      var dayInfo = {\n        key: date.toString(),\n        date: date.getDate().toString(),\n        originalDate: originalDate,\n        isInMonth: date.getMonth() === navigatedDate.getMonth(),\n        isToday: compareDates(todaysDate, date),\n        isSelected: isInDateRangeArray(date, selectedDates),\n        isInBounds: !isRestrictedDate(date, restrictedDateOptions),\n        isMarked: (markedDays === null || markedDays === void 0 ? void 0 : markedDays.some(function (markedDay) {\n          return compareDates(originalDate, markedDay);\n        })) || false\n      };\n      week.push(dayInfo);\n      if (dayInfo.isInMonth) {\n        isAllDaysOfWeekOutOfMonth = false;\n      }\n      date.setDate(date.getDate() + 1);\n    };\n    for (var dayIndex = 0; dayIndex < DAYS_IN_WEEK; dayIndex++) {\n      _loop_1(dayIndex);\n    }\n    // We append the condition of the loop depending upon the showSixWeeksByDefault prop.\n    shouldGetWeeks = weeksToShow ? weekIndex < weeksToShow + 1 : !isAllDaysOfWeekOutOfMonth || weekIndex === 0;\n    // we don't check shouldGetWeeks before pushing because we want to add one extra week for transition state\n    weeks.push(week);\n  }\n  return weeks;\n};","map":{"version":3,"names":["addDays","compareDates","getDateRangeArray","isInDateRangeArray","DAYS_IN_WEEK","getDateRangeTypeToUse","getBoundedDateRange","isRestrictedDate","getDayGrid","options","selectedDate","dateRangeType","firstDayOfWeek","today","minDate","maxDate","weeksToShow","workWeekDays","daysToSelectInDayView","restrictedDates","markedDays","restrictedDateOptions","todaysDate","Date","navigatedDate","date","getFullYear","getMonth","getDate","weeks","getDay","setDate","isAllDaysOfWeekOutOfMonth","selectedDateRangeType","selectedDates","shouldGetWeeks","weekIndex","week","dayIndex","originalDate","getTime","dayInfo","key","toString","isInMonth","isToday","isSelected","isInBounds","isMarked","some","markedDay","push"],"sources":["/Users/jerrywuyongon/node_modules/@fluentui/date-time-utilities/lib/src/dateGrid/getDayGrid.ts"],"sourcesContent":["import { addDays, compareDates, getDateRangeArray, isInDateRangeArray } from '../dateMath/dateMath';\nimport { DAYS_IN_WEEK } from '../dateValues/dateValues';\nimport { IDay, IDayGridOptions } from './dateGrid.types';\nimport { getDateRangeTypeToUse } from './getDateRangeTypeToUse';\nimport { getBoundedDateRange } from './getBoundedDateRange';\nimport { isRestrictedDate } from './isRestrictedDate';\n\n/**\n * Generates a grid of days, given the `options`.\n * Returns one additional week at the begining from the previous range\n * and one at the end from the future range\n * @param options - parameters to specify date related restrictions for the resulting grid\n */\nexport const getDayGrid = (options: IDayGridOptions): IDay[][] => {\n  const {\n    selectedDate,\n    dateRangeType,\n    firstDayOfWeek,\n    today,\n    minDate,\n    maxDate,\n    weeksToShow,\n    workWeekDays,\n    daysToSelectInDayView,\n    restrictedDates,\n    markedDays,\n  } = options;\n  const restrictedDateOptions = { minDate, maxDate, restrictedDates };\n\n  const todaysDate = today || new Date();\n\n  const navigatedDate = options.navigatedDate ? options.navigatedDate : todaysDate;\n\n  let date;\n  if (weeksToShow && weeksToShow <= 4) {\n    // if showing less than a full month, just use date == navigatedDate\n    date = new Date(navigatedDate.getFullYear(), navigatedDate.getMonth(), navigatedDate.getDate());\n  } else {\n    date = new Date(navigatedDate.getFullYear(), navigatedDate.getMonth(), 1);\n  }\n  const weeks: IDay[][] = [];\n\n  // Cycle the date backwards to get to the first day of the week.\n  while (date.getDay() !== firstDayOfWeek) {\n    date.setDate(date.getDate() - 1);\n  }\n\n  // add the transition week as last week of previous range\n  date = addDays(date, -DAYS_IN_WEEK);\n\n  // a flag to indicate whether all days of the week are outside the month\n  let isAllDaysOfWeekOutOfMonth = false;\n\n  // in work week view if the days aren't contiguous we use week view instead\n  const selectedDateRangeType = getDateRangeTypeToUse(dateRangeType, workWeekDays, firstDayOfWeek);\n\n  let selectedDates: Date[] = [];\n\n  if (selectedDate) {\n    selectedDates = getDateRangeArray(\n      selectedDate,\n      selectedDateRangeType,\n      firstDayOfWeek,\n      workWeekDays,\n      daysToSelectInDayView,\n    );\n    selectedDates = getBoundedDateRange(selectedDates, minDate, maxDate);\n  }\n\n  let shouldGetWeeks = true;\n\n  for (let weekIndex = 0; shouldGetWeeks; weekIndex++) {\n    const week: IDay[] = [];\n\n    isAllDaysOfWeekOutOfMonth = true;\n\n    for (let dayIndex = 0; dayIndex < DAYS_IN_WEEK; dayIndex++) {\n      const originalDate = new Date(date.getTime());\n      const dayInfo: IDay = {\n        key: date.toString(),\n        date: date.getDate().toString(),\n        originalDate: originalDate,\n        isInMonth: date.getMonth() === navigatedDate.getMonth(),\n        isToday: compareDates(todaysDate, date),\n        isSelected: isInDateRangeArray(date, selectedDates),\n        isInBounds: !isRestrictedDate(date, restrictedDateOptions),\n        isMarked: markedDays?.some(markedDay => compareDates(originalDate, markedDay)) || false,\n      };\n\n      week.push(dayInfo);\n\n      if (dayInfo.isInMonth) {\n        isAllDaysOfWeekOutOfMonth = false;\n      }\n\n      date.setDate(date.getDate() + 1);\n    }\n\n    // We append the condition of the loop depending upon the showSixWeeksByDefault prop.\n    shouldGetWeeks = weeksToShow ? weekIndex < weeksToShow + 1 : !isAllDaysOfWeekOutOfMonth || weekIndex === 0;\n\n    // we don't check shouldGetWeeks before pushing because we want to add one extra week for transition state\n    weeks.push(week);\n  }\n\n  return weeks;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}