{"ast":null,"code":"import { extendComponent } from './extendComponent';\n/**\n * Generates a function to be attached to a React component, which can be called\n * as a replacement to setTimeout. In-flight async calls will be auto canceled if the component\n * is unmounting before the async code is executed, preventing bugs where code\n * accesses things within the component after being unmounted.\n */\nexport var safeSetTimeout = function (component) {\n  var activeTimeouts;\n  return function (cb, duration) {\n    if (!activeTimeouts) {\n      activeTimeouts = new Set();\n      extendComponent(component, {\n        componentWillUnmount: function () {\n          activeTimeouts.forEach(function (id) {\n            return clearTimeout(id);\n          });\n        }\n      });\n    }\n    var timeoutId = setTimeout(function () {\n      activeTimeouts.delete(timeoutId);\n      cb();\n    }, duration);\n    activeTimeouts.add(timeoutId);\n  };\n};","map":{"version":3,"names":["extendComponent","safeSetTimeout","component","activeTimeouts","cb","duration","Set","componentWillUnmount","forEach","id","clearTimeout","timeoutId","setTimeout","delete","add"],"sources":["/Users/jerrywuyongon/node_modules/@fluentui/utilities/src/safeSetTimeout.ts"],"sourcesContent":["import * as React from 'react';\nimport { extendComponent } from './extendComponent';\n\n/**\n * Generates a function to be attached to a React component, which can be called\n * as a replacement to setTimeout. In-flight async calls will be auto canceled if the component\n * is unmounting before the async code is executed, preventing bugs where code\n * accesses things within the component after being unmounted.\n */\nexport const safeSetTimeout = (component: React.Component) => {\n  let activeTimeouts: Set<NodeJS.Timer>;\n\n  return (cb: Function, duration: number) => {\n    if (!activeTimeouts) {\n      activeTimeouts = new Set<NodeJS.Timer>();\n\n      extendComponent(component, {\n        componentWillUnmount: () => {\n          activeTimeouts.forEach((id: NodeJS.Timer) => clearTimeout(id));\n        },\n      });\n    }\n\n    const timeoutId = setTimeout(() => {\n      activeTimeouts.delete(timeoutId);\n      cb();\n    }, duration);\n    activeTimeouts.add(timeoutId);\n  };\n};\n"],"mappings":"AACA,SAASA,eAAe,QAAQ,mBAAmB;AAEnD;;;;;;AAMA,OAAO,IAAMC,cAAc,GAAG,SAAAA,CAACC,SAA0B;EACvD,IAAIC,cAAiC;EAErC,OAAO,UAACC,EAAY,EAAEC,QAAgB;IACpC,IAAI,CAACF,cAAc,EAAE;MACnBA,cAAc,GAAG,IAAIG,GAAG,EAAgB;MAExCN,eAAe,CAACE,SAAS,EAAE;QACzBK,oBAAoB,EAAE,SAAAA,CAAA;UACpBJ,cAAc,CAACK,OAAO,CAAC,UAACC,EAAgB;YAAK,OAAAC,YAAY,CAACD,EAAE,CAAC;UAAhB,CAAgB,CAAC;QAChE;OACD,CAAC;;IAGJ,IAAME,SAAS,GAAGC,UAAU,CAAC;MAC3BT,cAAc,CAACU,MAAM,CAACF,SAAS,CAAC;MAChCP,EAAE,EAAE;IACN,CAAC,EAAEC,QAAQ,CAAC;IACZF,cAAc,CAACW,GAAG,CAACH,SAAS,CAAC;EAC/B,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}