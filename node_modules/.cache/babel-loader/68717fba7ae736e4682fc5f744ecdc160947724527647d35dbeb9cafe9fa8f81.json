{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport * as React from 'react';\nimport { KeyCodes, getId, getNativeProps, inputProperties, classNamesFunction, initializeComponentRef } from '../../../../Utilities';\nimport { getStyles } from './EditingItem.styles';\nvar EditingItem = /** @class */function (_super) {\n  __extends(EditingItem, _super);\n  function EditingItem(props) {\n    var _this = _super.call(this, props) || this;\n    _this._editingFloatingPicker = React.createRef();\n    _this._renderEditingSuggestions = function () {\n      var FloatingPicker = _this.props.onRenderFloatingPicker;\n      var floatingPickerProps = _this.props.floatingPickerProps;\n      if (!FloatingPicker || !floatingPickerProps) {\n        return React.createElement(React.Fragment, null);\n      }\n      return React.createElement(FloatingPicker, __assign({\n        componentRef: _this._editingFloatingPicker,\n        onChange: _this._onSuggestionSelected,\n        inputElement: _this._editingInput,\n        selectedItems: []\n      }, floatingPickerProps));\n    };\n    _this._resolveInputRef = function (ref) {\n      _this._editingInput = ref;\n      _this.forceUpdate(function () {\n        _this._editingInput.focus();\n      });\n    };\n    _this._onInputClick = function () {\n      _this._editingFloatingPicker.current && _this._editingFloatingPicker.current.showPicker(true /*updatevalue*/);\n    };\n\n    _this._onInputBlur = function (ev) {\n      if (_this._editingFloatingPicker.current && ev.relatedTarget !== null) {\n        var target = ev.relatedTarget;\n        if (target.className.indexOf('ms-Suggestions-itemButton') === -1 && target.className.indexOf('ms-Suggestions-sectionButton') === -1) {\n          _this._editingFloatingPicker.current.forceResolveSuggestion();\n        }\n      }\n    };\n    _this._onInputChange = function (ev) {\n      var value = ev.target.value;\n      if (value === '') {\n        if (_this.props.onRemoveItem) {\n          _this.props.onRemoveItem();\n        }\n      } else {\n        _this._editingFloatingPicker.current && _this._editingFloatingPicker.current.onQueryStringChanged(value);\n      }\n    };\n    _this._onSuggestionSelected = function (item) {\n      _this.props.onEditingComplete(_this.props.item, item);\n    };\n    initializeComponentRef(_this);\n    _this.state = {\n      contextualMenuVisible: false\n    };\n    return _this;\n  }\n  EditingItem.prototype.componentDidMount = function () {\n    var getEditingItemText = this.props.getEditingItemText;\n    var itemText = getEditingItemText(this.props.item);\n    this._editingFloatingPicker.current && this._editingFloatingPicker.current.onQueryStringChanged(itemText);\n    this._editingInput.value = itemText;\n    this._editingInput.focus();\n  };\n  EditingItem.prototype.render = function () {\n    var itemId = getId();\n    var nativeProps = getNativeProps(this.props, inputProperties);\n    var getClassNames = classNamesFunction();\n    var classNames = getClassNames(getStyles);\n    return React.createElement(\"div\", {\n      \"aria-labelledby\": 'editingItemPersona-' + itemId,\n      className: classNames.root\n    }, React.createElement(\"input\", __assign({\n      autoCapitalize: 'off',\n      autoComplete: 'off'\n    }, nativeProps, {\n      ref: this._resolveInputRef,\n      onChange: this._onInputChange,\n      onKeyDown: this._onInputKeyDown,\n      onBlur: this._onInputBlur,\n      onClick: this._onInputClick,\n      \"data-lpignore\": true,\n      className: classNames.input,\n      id: itemId\n    })), this._renderEditingSuggestions());\n  };\n  EditingItem.prototype._onInputKeyDown = function (ev) {\n    // eslint-disable-next-line deprecation/deprecation\n    if (ev.which === KeyCodes.backspace || ev.which === KeyCodes.del) {\n      ev.stopPropagation();\n    }\n  };\n  return EditingItem;\n}(React.Component);\nexport { EditingItem };","map":{"version":3,"names":["React","KeyCodes","getId","getNativeProps","inputProperties","classNamesFunction","initializeComponentRef","getStyles","EditingItem","_super","__extends","props","_this","call","_editingFloatingPicker","createRef","_renderEditingSuggestions","FloatingPicker","onRenderFloatingPicker","floatingPickerProps","createElement","Fragment","__assign","componentRef","onChange","_onSuggestionSelected","inputElement","_editingInput","selectedItems","_resolveInputRef","ref","forceUpdate","focus","_onInputClick","current","showPicker","_onInputBlur","ev","relatedTarget","target","className","indexOf","forceResolveSuggestion","_onInputChange","value","onRemoveItem","onQueryStringChanged","item","onEditingComplete","state","contextualMenuVisible","prototype","componentDidMount","getEditingItemText","itemText","render","itemId","nativeProps","getClassNames","classNames","root","autoCapitalize","autoComplete","onKeyDown","_onInputKeyDown","onBlur","onClick","input","id","which","backspace","del","stopPropagation","Component"],"sources":["/Users/jerrywuyongon/node_modules/@fluentui/react/lib/components/SelectedItemsList/SelectedPeopleList/src/components/SelectedItemsList/SelectedPeopleList/Items/EditingItem.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n  KeyCodes,\n  getId,\n  getNativeProps,\n  inputProperties,\n  classNamesFunction,\n  initializeComponentRef,\n} from '../../../../Utilities';\nimport { FloatingPeoplePicker } from '../../../../FloatingPicker';\nimport { getStyles } from './EditingItem.styles';\nimport type { IExtendedPersonaProps } from '../SelectedPeopleList';\nimport type { IPeoplePickerItemState } from './ExtendedSelectedItem';\nimport type {\n  IEditingSelectedPeopleItemProps,\n  IEditingSelectedPeopleItemStyles,\n  IEditingSelectedPeopleItemStylesProps,\n} from './EditingItem.types';\n\nexport class EditingItem extends React.Component<IEditingSelectedPeopleItemProps, IPeoplePickerItemState> {\n  private _editingInput: HTMLInputElement;\n  private _editingFloatingPicker = React.createRef<FloatingPeoplePicker>();\n\n  constructor(props: IEditingSelectedPeopleItemProps) {\n    super(props);\n\n    initializeComponentRef(this);\n    this.state = { contextualMenuVisible: false };\n  }\n\n  public componentDidMount(): void {\n    const getEditingItemText = this.props.getEditingItemText as (item: IExtendedPersonaProps) => string;\n    const itemText = getEditingItemText(this.props.item);\n\n    this._editingFloatingPicker.current && this._editingFloatingPicker.current.onQueryStringChanged(itemText);\n    this._editingInput.value = itemText;\n    this._editingInput.focus();\n  }\n\n  public render(): JSX.Element {\n    const itemId = getId();\n    const nativeProps = getNativeProps<React.InputHTMLAttributes<HTMLInputElement>>(this.props, inputProperties);\n    const getClassNames = classNamesFunction<IEditingSelectedPeopleItemStylesProps, IEditingSelectedPeopleItemStyles>();\n    const classNames = getClassNames(getStyles);\n    return (\n      <div aria-labelledby={'editingItemPersona-' + itemId} className={classNames.root}>\n        <input\n          autoCapitalize={'off'}\n          autoComplete={'off'}\n          {...nativeProps}\n          ref={this._resolveInputRef}\n          onChange={this._onInputChange}\n          onKeyDown={this._onInputKeyDown}\n          onBlur={this._onInputBlur}\n          onClick={this._onInputClick}\n          data-lpignore={true}\n          className={classNames.input}\n          id={itemId}\n        />\n        {this._renderEditingSuggestions()}\n      </div>\n    );\n  }\n\n  private _renderEditingSuggestions = (): JSX.Element => {\n    const FloatingPicker = this.props.onRenderFloatingPicker;\n    const floatingPickerProps = this.props.floatingPickerProps;\n    if (!FloatingPicker || !floatingPickerProps) {\n      return <></>;\n    }\n    return (\n      <FloatingPicker\n        componentRef={this._editingFloatingPicker}\n        onChange={this._onSuggestionSelected}\n        inputElement={this._editingInput}\n        selectedItems={[]}\n        {...floatingPickerProps}\n      />\n    );\n  };\n\n  private _resolveInputRef = (ref: HTMLInputElement): void => {\n    this._editingInput = ref;\n\n    this.forceUpdate(() => {\n      this._editingInput.focus();\n    });\n  };\n\n  private _onInputClick = (): void => {\n    this._editingFloatingPicker.current && this._editingFloatingPicker.current.showPicker(true /*updatevalue*/);\n  };\n\n  private _onInputBlur = (ev: React.FocusEvent<HTMLElement>): void => {\n    if (this._editingFloatingPicker.current && ev.relatedTarget !== null) {\n      const target = ev.relatedTarget as HTMLElement;\n      if (\n        target.className.indexOf('ms-Suggestions-itemButton') === -1 &&\n        target.className.indexOf('ms-Suggestions-sectionButton') === -1\n      ) {\n        this._editingFloatingPicker.current.forceResolveSuggestion();\n      }\n    }\n  };\n\n  private _onInputChange = (ev: React.FormEvent<HTMLElement>): void => {\n    const value: string = (ev.target as HTMLInputElement).value;\n\n    if (value === '') {\n      if (this.props.onRemoveItem) {\n        this.props.onRemoveItem();\n      }\n    } else {\n      this._editingFloatingPicker.current && this._editingFloatingPicker.current.onQueryStringChanged(value);\n    }\n  };\n\n  private _onInputKeyDown(ev: React.KeyboardEvent<HTMLInputElement>): void {\n    // eslint-disable-next-line deprecation/deprecation\n    if (ev.which === KeyCodes.backspace || ev.which === KeyCodes.del) {\n      ev.stopPropagation();\n    }\n  }\n\n  private _onSuggestionSelected = (item: IExtendedPersonaProps): void => {\n    this.props.onEditingComplete(this.props.item, item);\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}