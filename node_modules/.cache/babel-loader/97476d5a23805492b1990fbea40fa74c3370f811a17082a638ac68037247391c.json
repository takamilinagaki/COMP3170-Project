{"ast":null,"code":"import { __assign, __extends, __spreadArray } from \"tslib\";\nimport * as React from 'react';\nimport { classNamesFunction, css, nullRender, getNativeProps, divProperties, composeComponentAs, initializeComponentRef } from '../../Utilities';\nimport { OverflowSet } from '../../OverflowSet';\nimport { ResizeGroup } from '../../ResizeGroup';\nimport { FocusZone, FocusZoneDirection } from '../../FocusZone';\nimport { CommandBarButton } from '../../Button';\nimport { TooltipHost } from '../../Tooltip';\nimport { getCommandButtonStyles } from './CommandBar.styles';\nvar getClassNames = classNamesFunction();\nvar CommandBarBase = /** @class */function (_super) {\n  __extends(CommandBarBase, _super);\n  function CommandBarBase(props) {\n    var _this = _super.call(this, props) || this;\n    _this._overflowSet = React.createRef();\n    _this._resizeGroup = React.createRef();\n    _this._onRenderData = function (data) {\n      var _a = _this.props,\n        ariaLabel = _a.ariaLabel,\n        primaryGroupAriaLabel = _a.primaryGroupAriaLabel,\n        farItemsGroupAriaLabel = _a.farItemsGroupAriaLabel;\n      var hasSecondSet = data.farItems && data.farItems.length > 0;\n      return React.createElement(FocusZone, {\n        className: css(_this._classNames.root),\n        direction: FocusZoneDirection.horizontal,\n        role: 'menubar',\n        \"aria-label\": ariaLabel\n      }, React.createElement(OverflowSet, {\n        role: hasSecondSet ? 'group' : 'none',\n        \"aria-label\": hasSecondSet ? primaryGroupAriaLabel : undefined,\n        componentRef: _this._overflowSet,\n        className: css(_this._classNames.primarySet),\n        items: data.primaryItems,\n        overflowItems: data.overflowItems.length ? data.overflowItems : undefined,\n        onRenderItem: _this._onRenderItem,\n        onRenderOverflowButton: _this._onRenderOverflowButton\n      }), hasSecondSet && React.createElement(OverflowSet, {\n        role: \"group\",\n        \"aria-label\": farItemsGroupAriaLabel,\n        className: css(_this._classNames.secondarySet),\n        items: data.farItems,\n        onRenderItem: _this._onRenderItem,\n        onRenderOverflowButton: nullRender\n      }));\n    };\n    _this._onRenderItem = function (item) {\n      if (item.onRender) {\n        // These are the top level items, there is no relevant menu dismissing function to\n        // provide for the IContextualMenuItem onRender function. Pass in a no op function instead.\n        return item.onRender(item, function () {\n          return undefined;\n        });\n      }\n      // eslint-disable-next-line deprecation/deprecation\n      var itemText = item.text || item.name;\n      var commandButtonProps = __assign(__assign({\n        allowDisabledFocus: true,\n        role: 'menuitem'\n      }, item), {\n        styles: getCommandButtonStyles(item.buttonStyles),\n        className: css('ms-CommandBarItem-link', item.className),\n        text: !item.iconOnly ? itemText : undefined,\n        menuProps: item.subMenuProps,\n        onClick: _this._onButtonClick(item)\n      });\n      if (item.iconOnly && (itemText !== undefined || item.tooltipHostProps)) {\n        return React.createElement(TooltipHost, __assign({\n          role: \"none\",\n          content: itemText,\n          setAriaDescribedBy: false\n        }, item.tooltipHostProps), _this._commandButton(item, commandButtonProps));\n      }\n      return _this._commandButton(item, commandButtonProps);\n    };\n    _this._commandButton = function (item, props) {\n      var ButtonAs = _this.props.buttonAs;\n      var CommandBarButtonAs = item.commandBarButtonAs;\n      var DefaultButtonAs = CommandBarButton;\n      // The prop types between these three possible implementations overlap enough that a force-cast is safe.\n      var Type = DefaultButtonAs;\n      if (CommandBarButtonAs) {\n        Type = composeComponentAs(CommandBarButtonAs, Type);\n      }\n      if (ButtonAs) {\n        Type = composeComponentAs(ButtonAs, Type);\n      }\n      // Always pass the default implementation to the override so it may be composed.\n      return React.createElement(Type, __assign({}, props));\n    };\n    _this._onRenderOverflowButton = function (overflowItems) {\n      var _a = _this.props.overflowButtonProps,\n        overflowButtonProps = _a === void 0 ? {} : _a;\n      var combinedOverflowItems = __spreadArray(__spreadArray([], overflowButtonProps.menuProps ? overflowButtonProps.menuProps.items : [], true), overflowItems, true);\n      var overflowProps = __assign(__assign({\n        role: 'menuitem'\n      }, overflowButtonProps), {\n        styles: __assign({\n          menuIcon: {\n            fontSize: '17px'\n          }\n        }, overflowButtonProps.styles),\n        className: css('ms-CommandBar-overflowButton', overflowButtonProps.className),\n        menuProps: __assign(__assign({}, overflowButtonProps.menuProps), {\n          items: combinedOverflowItems\n        }),\n        menuIconProps: __assign({\n          iconName: 'More'\n        }, overflowButtonProps.menuIconProps)\n      });\n      var OverflowButtonType = _this.props.overflowButtonAs ? composeComponentAs(_this.props.overflowButtonAs, CommandBarButton) : CommandBarButton;\n      return React.createElement(OverflowButtonType, __assign({}, overflowProps));\n    };\n    _this._onReduceData = function (data) {\n      var _a = _this.props,\n        shiftOnReduce = _a.shiftOnReduce,\n        onDataReduced = _a.onDataReduced;\n      var primaryItems = data.primaryItems,\n        overflowItems = data.overflowItems,\n        cacheKey = data.cacheKey;\n      var farItems = data.farItems;\n      // Use first item if shiftOnReduce, otherwise use last item\n      var movedItem = primaryItems[shiftOnReduce ? 0 : primaryItems.length - 1];\n      if (movedItem !== undefined) {\n        movedItem.renderedInOverflow = true;\n        overflowItems = __spreadArray([movedItem], overflowItems, true);\n        primaryItems = shiftOnReduce ? primaryItems.slice(1) : primaryItems.slice(0, -1);\n        var newData = __assign(__assign({}, data), {\n          primaryItems: primaryItems,\n          overflowItems: overflowItems\n        });\n        cacheKey = _this._computeCacheKey({\n          primaryItems: primaryItems,\n          overflow: overflowItems.length > 0,\n          farItems: farItems\n        });\n        if (onDataReduced) {\n          onDataReduced(movedItem);\n        }\n        newData.cacheKey = cacheKey;\n        return newData;\n      }\n      return undefined;\n    };\n    _this._onGrowData = function (data) {\n      var _a = _this.props,\n        shiftOnReduce = _a.shiftOnReduce,\n        onDataGrown = _a.onDataGrown;\n      var minimumOverflowItems = data.minimumOverflowItems;\n      var primaryItems = data.primaryItems,\n        overflowItems = data.overflowItems,\n        cacheKey = data.cacheKey;\n      var farItems = data.farItems;\n      var movedItem = overflowItems[0];\n      // Make sure that moved item exists and is not one of the original overflow items\n      if (movedItem !== undefined && overflowItems.length > minimumOverflowItems) {\n        movedItem.renderedInOverflow = false;\n        overflowItems = overflowItems.slice(1);\n        // if shiftOnReduce, movedItem goes first, otherwise, last.\n        primaryItems = shiftOnReduce ? __spreadArray([movedItem], primaryItems, true) : __spreadArray(__spreadArray([], primaryItems, true), [movedItem], false);\n        var newData = __assign(__assign({}, data), {\n          primaryItems: primaryItems,\n          overflowItems: overflowItems\n        });\n        cacheKey = _this._computeCacheKey({\n          primaryItems: primaryItems,\n          overflow: overflowItems.length > 0,\n          farItems: farItems\n        });\n        if (onDataGrown) {\n          onDataGrown(movedItem);\n        }\n        newData.cacheKey = cacheKey;\n        return newData;\n      }\n      return undefined;\n    };\n    initializeComponentRef(_this);\n    return _this;\n  }\n  CommandBarBase.prototype.render = function () {\n    var _a = this.props,\n      items = _a.items,\n      overflowItems = _a.overflowItems,\n      farItems = _a.farItems,\n      styles = _a.styles,\n      theme = _a.theme,\n      dataDidRender = _a.dataDidRender,\n      _b = _a.onReduceData,\n      onReduceData = _b === void 0 ? this._onReduceData : _b,\n      _c = _a.onGrowData,\n      onGrowData = _c === void 0 ? this._onGrowData : _c,\n      _d = _a.resizeGroupAs,\n      ResizeGroupAs = _d === void 0 ? ResizeGroup : _d;\n    var commandBarData = {\n      primaryItems: __spreadArray([], items, true),\n      overflowItems: __spreadArray([], overflowItems, true),\n      minimumOverflowItems: __spreadArray([], overflowItems, true).length,\n      farItems: farItems,\n      cacheKey: this._computeCacheKey({\n        primaryItems: __spreadArray([], items, true),\n        overflow: overflowItems && overflowItems.length > 0,\n        farItems: farItems\n      })\n    };\n    this._classNames = getClassNames(styles, {\n      theme: theme\n    });\n    // ResizeGroup will render these attributes to the root <div>.\n    // TODO We may need to elevate classNames from <FocusZone> into <ResizeGroup> ?\n    var nativeProps = getNativeProps(this.props, divProperties);\n    return React.createElement(ResizeGroupAs, __assign({}, nativeProps, {\n      componentRef: this._resizeGroup,\n      data: commandBarData,\n      onReduceData: onReduceData,\n      onGrowData: onGrowData,\n      onRenderData: this._onRenderData,\n      dataDidRender: dataDidRender\n    }));\n  };\n  CommandBarBase.prototype.focus = function () {\n    var overflowSet = this._overflowSet.current;\n    overflowSet && overflowSet.focus();\n  };\n  CommandBarBase.prototype.remeasure = function () {\n    this._resizeGroup.current && this._resizeGroup.current.remeasure();\n  };\n  CommandBarBase.prototype._onButtonClick = function (item) {\n    return function (ev) {\n      // inactive is deprecated. remove check in 7.0\n      // eslint-disable-next-line deprecation/deprecation\n      if (item.inactive) {\n        return;\n      }\n      if (item.onClick) {\n        item.onClick(ev, item);\n      }\n    };\n  };\n  CommandBarBase.prototype._computeCacheKey = function (data) {\n    var primaryItems = data.primaryItems,\n      overflow = data.overflow,\n      farItems = data.farItems;\n    var returnKey = function (acc, current) {\n      var _a = current.cacheKey,\n        cacheKey = _a === void 0 ? current.key : _a;\n      return acc + cacheKey;\n    };\n    var primaryKey = primaryItems && primaryItems.reduce(returnKey, '');\n    var overflowKey = overflow ? 'overflow' : '';\n    var farKey = farItems && farItems.reduce(returnKey, '');\n    return [primaryKey, overflowKey, farKey].join('');\n  };\n  CommandBarBase.defaultProps = {\n    items: [],\n    overflowItems: []\n  };\n  return CommandBarBase;\n}(React.Component);\nexport { CommandBarBase };","map":{"version":3,"names":["React","classNamesFunction","css","nullRender","getNativeProps","divProperties","composeComponentAs","initializeComponentRef","OverflowSet","ResizeGroup","FocusZone","FocusZoneDirection","CommandBarButton","TooltipHost","getCommandButtonStyles","getClassNames","CommandBarBase","_super","__extends","props","_this","call","_overflowSet","createRef","_resizeGroup","_onRenderData","data","_a","ariaLabel","primaryGroupAriaLabel","farItemsGroupAriaLabel","hasSecondSet","farItems","length","createElement","className","_classNames","root","direction","horizontal","role","undefined","componentRef","primarySet","items","primaryItems","overflowItems","onRenderItem","_onRenderItem","onRenderOverflowButton","_onRenderOverflowButton","secondarySet","item","onRender","itemText","text","name","commandButtonProps","__assign","allowDisabledFocus","styles","buttonStyles","iconOnly","menuProps","subMenuProps","onClick","_onButtonClick","tooltipHostProps","content","setAriaDescribedBy","_commandButton","ButtonAs","buttonAs","CommandBarButtonAs","commandBarButtonAs","DefaultButtonAs","Type","overflowButtonProps","combinedOverflowItems","__spreadArray","overflowProps","menuIcon","fontSize","menuIconProps","iconName","OverflowButtonType","overflowButtonAs","_onReduceData","shiftOnReduce","onDataReduced","cacheKey","movedItem","renderedInOverflow","slice","newData","_computeCacheKey","overflow","_onGrowData","onDataGrown","minimumOverflowItems","prototype","render","theme","dataDidRender","_b","onReduceData","_c","onGrowData","_d","resizeGroupAs","ResizeGroupAs","commandBarData","nativeProps","onRenderData","focus","overflowSet","current","remeasure","ev","inactive","returnKey","acc","key","primaryKey","reduce","overflowKey","farKey","join","defaultProps","Component"],"sources":["/Users/jerrywuyongon/node_modules/@fluentui/react/lib/components/src/components/CommandBar/CommandBar.base.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n  classNamesFunction,\n  css,\n  nullRender,\n  getNativeProps,\n  divProperties,\n  composeComponentAs,\n  initializeComponentRef,\n} from '../../Utilities';\nimport { OverflowSet } from '../../OverflowSet';\nimport { ResizeGroup } from '../../ResizeGroup';\nimport { FocusZone, FocusZoneDirection } from '../../FocusZone';\nimport { CommandBarButton } from '../../Button';\nimport { TooltipHost } from '../../Tooltip';\nimport { getCommandButtonStyles } from './CommandBar.styles';\nimport type { IComponentAs } from '../../Utilities';\nimport type {\n  ICommandBar,\n  ICommandBarItemProps,\n  ICommandBarProps,\n  ICommandBarStyleProps,\n  ICommandBarStyles,\n} from './CommandBar.types';\nimport type { IOverflowSet } from '../../OverflowSet';\nimport type { IResizeGroup } from '../../ResizeGroup';\nimport type { IButtonProps } from '../../Button';\n\nconst getClassNames = classNamesFunction<ICommandBarStyleProps, ICommandBarStyles>();\n\nexport interface ICommandBarData {\n  /**\n   * Items being rendered in the primary region\n   */\n  primaryItems: ICommandBarItemProps[];\n  /**\n   * Items being rendered in the overflow\n   */\n  overflowItems: ICommandBarItemProps[];\n  /**\n   * Items being rendered on the far side\n   */\n  farItems: ICommandBarItemProps[] | undefined;\n  /**\n   * Length of original overflowItems to ensure that they are not moved into primary region on resize\n   */\n  minimumOverflowItems: number;\n  /**\n   * Unique string used to cache the width of the command bar\n   */\n  cacheKey: string;\n}\n\nexport class CommandBarBase extends React.Component<ICommandBarProps, {}> implements ICommandBar {\n  public static defaultProps: ICommandBarProps = {\n    items: [],\n    overflowItems: [],\n  };\n\n  private _overflowSet = React.createRef<IOverflowSet>();\n  private _resizeGroup = React.createRef<IResizeGroup>();\n  private _classNames: { [key in keyof ICommandBarStyles]: string };\n\n  constructor(props: ICommandBarProps) {\n    super(props);\n\n    initializeComponentRef(this);\n  }\n\n  public render(): JSX.Element {\n    const {\n      items,\n      overflowItems,\n      farItems,\n      styles,\n      theme,\n      dataDidRender,\n      onReduceData = this._onReduceData,\n      onGrowData = this._onGrowData,\n      resizeGroupAs: ResizeGroupAs = ResizeGroup,\n    } = this.props;\n\n    const commandBarData: ICommandBarData = {\n      primaryItems: [...items],\n      overflowItems: [...overflowItems!],\n      minimumOverflowItems: [...overflowItems!].length, // for tracking\n      farItems,\n      cacheKey: this._computeCacheKey({\n        primaryItems: [...items],\n        overflow: overflowItems && overflowItems.length > 0,\n        farItems,\n      }),\n    };\n\n    this._classNames = getClassNames(styles!, { theme: theme! });\n\n    // ResizeGroup will render these attributes to the root <div>.\n    // TODO We may need to elevate classNames from <FocusZone> into <ResizeGroup> ?\n    const nativeProps = getNativeProps<React.HTMLAttributes<HTMLDivElement>>(this.props, divProperties);\n\n    return (\n      <ResizeGroupAs\n        {...nativeProps}\n        componentRef={this._resizeGroup}\n        data={commandBarData}\n        onReduceData={onReduceData}\n        onGrowData={onGrowData}\n        onRenderData={this._onRenderData}\n        dataDidRender={dataDidRender}\n      />\n    );\n  }\n\n  public focus(): void {\n    const { current: overflowSet } = this._overflowSet;\n\n    overflowSet && overflowSet.focus();\n  }\n\n  public remeasure(): void {\n    this._resizeGroup.current && this._resizeGroup.current.remeasure();\n  }\n\n  private _onRenderData = (data: ICommandBarData): JSX.Element => {\n    const { ariaLabel, primaryGroupAriaLabel, farItemsGroupAriaLabel } = this.props;\n    const hasSecondSet = data.farItems && data.farItems.length > 0;\n\n    return (\n      <FocusZone\n        className={css(this._classNames.root)}\n        direction={FocusZoneDirection.horizontal}\n        role={'menubar'}\n        aria-label={ariaLabel}\n      >\n        {/*Primary Items*/}\n        <OverflowSet\n          role={hasSecondSet ? 'group' : 'none'}\n          aria-label={hasSecondSet ? primaryGroupAriaLabel : undefined}\n          componentRef={this._overflowSet}\n          className={css(this._classNames.primarySet)}\n          items={data.primaryItems}\n          overflowItems={data.overflowItems.length ? data.overflowItems : undefined}\n          onRenderItem={this._onRenderItem}\n          onRenderOverflowButton={this._onRenderOverflowButton}\n        />\n\n        {/*Secondary Items*/}\n        {hasSecondSet && (\n          <OverflowSet\n            role=\"group\"\n            aria-label={farItemsGroupAriaLabel}\n            className={css(this._classNames.secondarySet)}\n            items={data.farItems}\n            onRenderItem={this._onRenderItem}\n            onRenderOverflowButton={nullRender}\n          />\n        )}\n      </FocusZone>\n    );\n  };\n\n  private _onRenderItem = (item: ICommandBarItemProps): JSX.Element | React.ReactNode => {\n    if (item.onRender) {\n      // These are the top level items, there is no relevant menu dismissing function to\n      // provide for the IContextualMenuItem onRender function. Pass in a no op function instead.\n      return item.onRender(item, () => undefined);\n    }\n\n    // eslint-disable-next-line deprecation/deprecation\n    const itemText = item.text || item.name;\n    const commandButtonProps: ICommandBarItemProps = {\n      allowDisabledFocus: true,\n      role: 'menuitem',\n      ...item,\n      styles: getCommandButtonStyles(item.buttonStyles),\n      className: css('ms-CommandBarItem-link', item.className),\n      text: !item.iconOnly ? itemText : undefined,\n      menuProps: item.subMenuProps,\n      onClick: this._onButtonClick(item),\n    };\n\n    if (item.iconOnly && (itemText !== undefined || item.tooltipHostProps)) {\n      return (\n        <TooltipHost role=\"none\" content={itemText} setAriaDescribedBy={false} {...item.tooltipHostProps}>\n          {this._commandButton(item, commandButtonProps)}\n        </TooltipHost>\n      );\n    }\n\n    return this._commandButton(item, commandButtonProps);\n  };\n\n  private _commandButton = (item: ICommandBarItemProps, props: ICommandBarItemProps): JSX.Element => {\n    const ButtonAs = this.props.buttonAs as IComponentAs<ICommandBarItemProps> | undefined;\n    const CommandBarButtonAs = item.commandBarButtonAs as IComponentAs<ICommandBarItemProps> | undefined;\n    const DefaultButtonAs = CommandBarButton as {} as IComponentAs<ICommandBarItemProps>;\n\n    // The prop types between these three possible implementations overlap enough that a force-cast is safe.\n    let Type = DefaultButtonAs;\n\n    if (CommandBarButtonAs) {\n      Type = composeComponentAs(CommandBarButtonAs, Type);\n    }\n\n    if (ButtonAs) {\n      Type = composeComponentAs(ButtonAs, Type);\n    }\n\n    // Always pass the default implementation to the override so it may be composed.\n    return <Type {...(props as ICommandBarItemProps)} />;\n  };\n\n  private _onButtonClick(item: ICommandBarItemProps): (ev: React.MouseEvent<HTMLButtonElement>) => void {\n    return ev => {\n      // inactive is deprecated. remove check in 7.0\n      // eslint-disable-next-line deprecation/deprecation\n      if (item.inactive) {\n        return;\n      }\n      if (item.onClick) {\n        item.onClick(ev, item);\n      }\n    };\n  }\n\n  private _onRenderOverflowButton = (overflowItems: ICommandBarItemProps[]): JSX.Element => {\n    const {\n      overflowButtonProps = {}, // assure that props is not empty\n    } = this.props;\n\n    const combinedOverflowItems: ICommandBarItemProps[] = [\n      ...(overflowButtonProps.menuProps ? overflowButtonProps.menuProps.items : []),\n      ...overflowItems,\n    ];\n\n    const overflowProps: IButtonProps = {\n      role: 'menuitem',\n      ...overflowButtonProps,\n      styles: { menuIcon: { fontSize: '17px' }, ...overflowButtonProps.styles },\n      className: css('ms-CommandBar-overflowButton', overflowButtonProps.className),\n      menuProps: { ...overflowButtonProps.menuProps, items: combinedOverflowItems },\n      menuIconProps: { iconName: 'More', ...overflowButtonProps.menuIconProps },\n    };\n\n    const OverflowButtonType = this.props.overflowButtonAs\n      ? composeComponentAs(this.props.overflowButtonAs, CommandBarButton)\n      : CommandBarButton;\n\n    return <OverflowButtonType {...(overflowProps as IButtonProps)} />;\n  };\n\n  private _computeCacheKey(data: {\n    primaryItems?: ICommandBarItemProps[];\n    overflow?: boolean;\n    farItems?: ICommandBarItemProps[];\n  }): string {\n    const { primaryItems, overflow, farItems } = data;\n    const returnKey = (acc: string, current: ICommandBarItemProps): string => {\n      const { cacheKey = current.key } = current;\n      return acc + cacheKey;\n    };\n\n    const primaryKey = primaryItems && primaryItems.reduce(returnKey, '');\n    const overflowKey = overflow ? 'overflow' : '';\n    const farKey = farItems && farItems.reduce(returnKey, '');\n\n    return [primaryKey, overflowKey, farKey].join('');\n  }\n\n  private _onReduceData = (data: ICommandBarData): ICommandBarData | undefined => {\n    const { shiftOnReduce, onDataReduced } = this.props;\n    let { primaryItems, overflowItems, cacheKey } = data;\n    const { farItems } = data;\n\n    // Use first item if shiftOnReduce, otherwise use last item\n    const movedItem = primaryItems[shiftOnReduce ? 0 : primaryItems.length - 1];\n\n    if (movedItem !== undefined) {\n      movedItem.renderedInOverflow = true;\n\n      overflowItems = [movedItem, ...overflowItems];\n      primaryItems = shiftOnReduce ? primaryItems.slice(1) : primaryItems.slice(0, -1);\n\n      const newData = { ...data, primaryItems, overflowItems };\n      cacheKey = this._computeCacheKey({ primaryItems, overflow: overflowItems.length > 0, farItems });\n\n      if (onDataReduced) {\n        onDataReduced(movedItem);\n      }\n\n      newData.cacheKey = cacheKey;\n      return newData;\n    }\n\n    return undefined;\n  };\n\n  private _onGrowData = (data: ICommandBarData): ICommandBarData | undefined => {\n    const { shiftOnReduce, onDataGrown } = this.props;\n    const { minimumOverflowItems } = data;\n    let { primaryItems, overflowItems, cacheKey } = data;\n    const { farItems } = data;\n    const movedItem = overflowItems[0];\n\n    // Make sure that moved item exists and is not one of the original overflow items\n    if (movedItem !== undefined && overflowItems.length > minimumOverflowItems) {\n      movedItem.renderedInOverflow = false;\n\n      overflowItems = overflowItems.slice(1);\n      // if shiftOnReduce, movedItem goes first, otherwise, last.\n      primaryItems = shiftOnReduce ? [movedItem, ...primaryItems] : [...primaryItems, movedItem];\n\n      const newData = { ...data, primaryItems, overflowItems };\n      cacheKey = this._computeCacheKey({ primaryItems, overflow: overflowItems.length > 0, farItems });\n\n      if (onDataGrown) {\n        onDataGrown(movedItem);\n      }\n\n      newData.cacheKey = cacheKey;\n      return newData;\n    }\n\n    return undefined;\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}